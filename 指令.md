# Role
你是一位资深 Python 全栈工程师。

# Issue Description
目前的 `build.py` 存在两个严重逻辑缺陷：
1. **范围遗漏**：它只扫描了 `blog/` 目录，导致根目录下的单页（如 `legal.html`, `about.html`）没有同步 Header/Footer。
2. **逻辑泛滥**：它给所有页面都强制插入了“推荐阅读”和“文章Schema”，导致 `legal.html` 出现了不该有的文章推荐列表。

# Goal
请重构 `build.py`，引入 **"Page Type Detection" (页面类型检测)** 逻辑。

# Logic Requirements (核心逻辑升级)

### 1. 扩大扫描范围
脚本必须遍历以下两个路径：
- `blog/*.html` (博客文章)
- `/*.html` (根目录下的单页，但**必须排除** `index.html` 母版自身)

### 2. 区分处理逻辑 (Switch Case)
在处理每个文件时，根据**文件路径**或**文件名**判断页面类型：

**Type A: 内容文章页 (Is Article)**
- **判断条件**: 文件位于 `blog/` 目录中。
- **执行操作**:
  1. **全站布局同步**: 覆盖 Header/Footer。
  2. **Schema**: 注入 `BlogPosting` 结构化数据。
  3. **面包屑**: 插入 `首页 > 博客 > [标题]` 面包屑。
  4. **推荐阅读**: **插入** Grid 样式的文章推荐卡片。

**Type B: 功能/法律单页 (Is Page)**
- **判断条件**: 文件位于根目录 (如 `legal.html`, `about.html`) 或文件名包含 `legal`, `terms`, `privacy`。
- **执行操作**:
  1. **全站布局同步**: 覆盖 Header/Footer (这是最重要的！)。
  2. **Schema**: **不要**注入 `BlogPosting`。如果需要，注入通用的 `WebPage` 类型。
  3. **面包屑**: 保持原样或仅插入简单的 `首页 > [标题]`，不要加 `/blog/` 中间层。
  4. **推荐阅读 (Critical)**: **绝对不要插入推荐模块！**
     - **清洗动作**: 必须主动查找并**删除**页面中已存在的 `id="related-posts"` 或 `id="auto-recommend"` 的容器，确保法律页面底部干净。

### 3. Header/Footer 同步细节 (Sync Detail)
- 读取根目录 `index.html` 的 `<header>` (或 nav) 和 `<footer>`。
- **路径标准化**: 无论当前处理的是根目录文件还是子目录文件，所有链接必须统一为 **根相对路径** (`/` 开头)。
  - 比如 `href="index.html"` 必须变为 `href="/"`。
  - 比如 `href="blog/index.html"` 必须变为 `href="/blog/"`。

# Output
请提供重构后的 `build.py` 完整代码，确保它能同时完美处理 `blog/article.html` (全功能) 和 `legal.html` (仅同步+清理)。